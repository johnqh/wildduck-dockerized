# WildDuck Dockerized Environment Configuration

# =============================================================================
# Mail Box Indexer Configuration
# =============================================================================

# Required: PostgreSQL database connection URL (from Doppler)
# Format: postgresql://username:password@host:port/database
# IMPORTANT: This MUST be provided via Doppler in production
# If not set, mail_box_indexer will fail to start
# Example for local testing: postgresql://ponder:password@postgres:5432/mail_box_indexer
DATABASE_URL=

# PostgreSQL schema name (from Doppler)
# Default: public
DATABASE_SCHEMA=public

# Required: Indexer wallet credentials for authentication with WildDuck
# Generate a new wallet or use an existing one
INDEXER_PRIVATE_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
INDEXER_WALLET_ADDRESS=0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0

# Required: Blockchain RPC provider API keys for indexing
# At least one provider key is required for blockchain data access
# Alchemy: Get your API key from https://www.alchemy.com/
ALCHEMY_API_KEY=your-alchemy-api-key

# Ankr: Get your API key from https://www.ankr.com/
# Recommended as a fallback/alternative to Alchemy
ANKR_API_KEY=your-ankr-api-key

# MetaMask Infura: Get your API key from https://infura.io/
# Optional additional provider for redundancy
METAMASK_API_KEY=your-metamask-api-key

# Preferred RPC provider (ALCHEMY, ANKR, or METAMASK)
# Controls which RPC provider to use when multiple API keys are configured
# Default: ALCHEMY (if not specified)
# Options:
#   ALCHEMY  - Use Alchemy RPC (best developer dashboard, 300M CU/month free) [DEFAULT]
#   ANKR     - Use Ankr RPC (highest free tier, 500M requests/month)
#   METAMASK - Use Metamask/Infura RPC (100K requests/day free)
PREFERRED_RPC=ALCHEMY

# Email domain for the deployment
EMAIL_DOMAIN=0xmail.box

# WildDuck server IP address (for validation)
# This is the static IP assigned to the WildDuck container in docker-compose.yml
WILDDUCK_IP_ADDRESS=172.20.0.10

# Points system backend IP addresses
POINTS_EMAIL_BACKEND_IP=127.0.0.1
POINTS_ADMIN_FRONTEND_IP=127.0.0.1

# =============================================================================
# WildDuck Configuration (Optional)
# =============================================================================

# MongoDB connection URL
# Default: mongodb://mongo:27017/wildduck (Docker service)
# Production example: mongodb://username:password@external-server:27017/wildduck?authSource=admin
WILDDUCK_MONGO_URL=mongodb://mongo:27017/wildduck

# Root admin username for WildDuck API
# This username receives full administrative privileges
WILDDUCK_ROOT_USERNAME=admin

# CORS allowed origins (comma-separated)
# Default: Not set (will prompt during setup)
# Examples: '*' for all, 'https://app.0xmail.box' for specific domain
# WILDDUCK_CORS_ORIGINS=*

# =============================================================================
# Optional: Advanced Indexer Configuration
# =============================================================================

# Enable testnet indexing (true/false)
ENABLE_TESTNETS=false

# Logging level (error, warn, info, debug, trace)
LOG_LEVEL=info

# Disable Ponder telemetry
PONDER_TELEMETRY_DISABLED=true

# Ponder polling interval (milliseconds) - how often to check for new blocks
# Lower values = more frequent checks = more RPC calls, but faster sync
# Recommended: 5000-30000 (5-30 seconds)
PONDER_POLLING_INTERVAL=5000

# Per-chain polling interval overrides (optional)
# These override the global PONDER_POLLING_INTERVAL for specific chains
# Useful for reducing costs on expensive chains like Ethereum mainnet
# PONDER_POLLING_INTERVAL_MAINNET=30000
# PONDER_POLLING_INTERVAL_POLYGON=20000
# PONDER_POLLING_INTERVAL_BASE=20000
# PONDER_POLLING_INTERVAL_OPTIMISM=20000
# PONDER_POLLING_INTERVAL_ARBITRUM=20000
# PONDER_POLLING_INTERVAL_SEPOLIA=30000

# Maximum concurrent RPC requests
# Higher values = faster sync but more RPC usage
# Recommended: 10-50 depending on RPC provider tier
PONDER_MAX_CONCURRENT_REQUESTS=20

# RPC request timeout (milliseconds)
# Recommended: 60000-90000 (60-90 seconds)
PONDER_RPC_TIMEOUT=60000

# Database query timeout (milliseconds)
# Recommended: 300000 (5 minutes)
PONDER_DATABASE_TIMEOUT=300000

# =============================================================================
# Optional: KYC Configuration (Sumsub)
# =============================================================================

# Enable KYC verification features
KYC_ENABLED=false

# Sumsub credentials (only needed if KYC_ENABLED=true)
SUMSUB_APP_TOKEN=
SUMSUB_SECRET_KEY=
SUMSUB_WEBHOOK_SECRET=
SUMSUB_BASE_URL=https://test-api.sumsub.com

# =============================================================================
# Optional: Solana Integration (Helius)
# =============================================================================

# Helius API key for Solana webhook functionality
HELIUS_API_KEY=

# API URL for webhook callbacks
API_URL=http://localhost:42069

# =============================================================================
# Optional: RevenueCat Configuration
# =============================================================================

# RevenueCat API key for subscription management
REVENUECAT_API_KEY=
REVENUECAT_NAMESERVICE_ENTITLEMENT=nameservice
