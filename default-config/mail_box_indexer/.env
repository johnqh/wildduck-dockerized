# Mail Box Indexer Default Configuration
# These are the default settings that will be used if not overridden by Doppler
# Doppler secrets will take precedence over these defaults

# =============================================================================
# Email Domain Configuration
# =============================================================================
# EMAIL_DOMAIN=

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL schema name
# Override to use a stable schema that persists across version changes
DATABASE_SCHEMA=indexer

# Database migration settings
DB_MIGRATION_MAX_RETRIES=3
DB_MIGRATION_RETRY_DELAY_MS=1000

# =============================================================================
# Network Configuration
# =============================================================================
# Enable testnet indexing (true/false)
ENABLE_TESTNETS=true

# =============================================================================
# RPC Provider Configuration
# =============================================================================
# Preferred RPC provider for Mailer contracts (ALCHEMY, ANKR, METAMASK, or CHAINSTACK)
# Controls which RPC provider to use for Mailer indexing
# Default: ALCHEMY (if not specified)
# PREFERRED_MAILER_RPC=METAMASK

# Preferred RPC provider for 3DNS indexing (ALCHEMY, ANKR, METAMASK, or CHAINSTACK)
# Controls which RPC provider to use for 3DNS indexing (Optimism)
# Default: CHAINSTACK (if not specified)
PREFERRED_3DNS_RPC=CHAINSTACK

# Rate limit for Optimism backfill (milliseconds between requests)
# Set to spread backfill over multiple days to stay within RPC limits
# 0 = no limit (fast backfill, use with Chainstack 20 RPS)
# 2500 = ~0.4 req/sec = ~34K req/day = 2-day backfill for 68K requests
OPTIMISM_BACKFILL_DELAY_MS=0

# =============================================================================
# RPC Request Optimization
# =============================================================================
# See docs/RPC_CONFIGS.md for detailed configuration guide

# Polling interval in milliseconds (how often to check for new blocks)
# Default: 1000ms (1 second) - very responsive but high RPC usage
# Recommended values:
# - Development: 5000ms (5 seconds) - balanced
# - Production (low cost): 12000ms (12 seconds) - minimal RPC usage
# - Production (fast): 2000ms (2 seconds) - near real-time, requires paid tier
PONDER_POLLING_INTERVAL=5000

# Per-chain polling interval overrides (optional)
# These override the global PONDER_POLLING_INTERVAL for specific chains
# Useful for reducing costs on expensive chains like Ethereum mainnet
PONDER_POLLING_INTERVAL_MAINNET=60000
PONDER_POLLING_INTERVAL_POLYGON=5000
PONDER_POLLING_INTERVAL_BASE=5000
PONDER_POLLING_INTERVAL_OPTIMISM=5000
PONDER_POLLING_INTERVAL_ARBITRUM=1000
PONDER_POLLING_INTERVAL_SEPOLIA=20000

# Maximum RPC requests per second (global default)
# Also supports legacy PONDER_MAX_CONCURRENT_REQUESTS
PONDER_MAX_RPS=2

# Separate RPS limits for Mailer and 3DNS indexing
# PONDER_MAILER_MAX_RPS defaults to PONDER_MAX_RPS
# PONDER_3DNS_MAX_RPS defaults to 20 for faster backfill
PONDER_MAILER_MAX_RPS=2
PONDER_3DNS_MAX_RPS=20

# RPC request timeout in milliseconds
# Default: 30000ms (30 seconds)
# Increase if you see timeout errors on slow networks
PONDER_RPC_TIMEOUT=60000

# Database query timeout in milliseconds
# Default: 240000ms (4 minutes)
# Increase for large historical data queries
PONDER_DATABASE_TIMEOUT=300000

# =============================================================================
# Logging and Performance Configuration
# =============================================================================
# Logging level (error, warn, info, debug, trace)
LOG_LEVEL=info

# Control Ponder's telemetry data collection
# Set to 'true' to disable telemetry, 'false' to enable
PONDER_TELEMETRY_DISABLED=false

# =============================================================================
# KYC Configuration (Sumsub)
# =============================================================================
# Enable KYC verification features
KYC_ENABLED=false

# Sumsub API Base URL
# Production: https://api.sumsub.com
# Sandbox: https://test-api.sumsub.com
SUMSUB_BASE_URL=https://api.sumsub.com

# =============================================================================
# RevenueCat Configuration
# =============================================================================
# RevenueCat entitlement identifier for NameService feature
# REVENUECAT_NAMESERVICE_ENTITLEMENT=

# =============================================================================
# API Configuration
# =============================================================================
# API URL for webhook callbacks
# API_URL=

# =============================================================================
# OAuth / Authentication Configuration
# =============================================================================
# JWT Secret for OAuth token signing (change in production!)
# JWT_SECRET=

# JWT Issuer URL for OAuth tokens
# JWT_ISSUER=

# =============================================================================
# Deployment Configuration
# =============================================================================
NODE_ENV=development

# =============================================================================
# WildDuck Integration
# =============================================================================
# WildDuck endpoint URL
# WILDDUCK_ENDPOINT_URL=

# WildDuck server IP address (for validation)
# This is the static IP assigned to the WildDuck container in docker-compose.yml
# WILDDUCK_IP_ADDRESS=

# =============================================================================
# Chainstack Configuration
# =============================================================================
# Chainstack API endpoints (per-chain)
# Free tier: 3M requests/month, ~25 RPS - completes 3DNS backfill in ~1 day
# Get endpoints at: https://console.chainstack.com/
# These are provided via Doppler in production
# CHAINSTACK_MAINNET_ENDPOINT=
# CHAINSTACK_SEPOLIA_ENDPOINT=
# CHAINSTACK_POLYGON_ENDPOINT=
# CHAINSTACK_OPTIMISM_ENDPOINT=
# CHAINSTACK_BASE_ENDPOINT=
# CHAINSTACK_ARBITRUM_ENDPOINT=

# =============================================================================
# Notes
# =============================================================================
#
# API Keys (provided via Doppler):
# - ALCHEMY_API_KEY
# - ANKR_API_KEY
# - METAMASK_API_KEY
# - ETHERSCAN_API_KEY
# - HELIUS_API_KEY
# - REVENUECAT_API_KEY
# - REVENUECAT_API_KEY_SANDBOX
# - SUMSUB_APP_TOKEN
# - SUMSUB_SECRET_KEY
# - SUMSUB_WEBHOOK_SECRET
# - INDEXER_PRIVATE_KEY
# - INDEXER_WALLET_ADDRESS
# - DATABASE_URL
#
# RPC URLs: Automatically derived from API keys via RpcHelper
# Contract addresses: Managed by @sudobility/configs package
# Solana Program IDs: Managed by @sudobility/configs package
